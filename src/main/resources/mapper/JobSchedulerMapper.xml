<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.avalon.wiki.mapper.JobSchedulerMapper">
  <resultMap id="BaseResultMap" type="com.avalon.wiki.domain.JobScheduler">
    <id column="job_id" jdbcType="BIGINT" property="jobId" />
    <result column="job_name" jdbcType="VARCHAR" property="jobName" />
    <result column="description" jdbcType="VARCHAR" property="description" />
    <result column="cron_expression" jdbcType="VARCHAR" property="cronExpression" />
    <result column="status" jdbcType="VARCHAR" property="status" />
  </resultMap>

  <select id="findAll" resultType="JobScheduler" >
    SELECT * FROM JOB_SCHEDULER J ORDER BY J.JOB_ID
  </select>

  <select id="findByJobName" resultType="JobScheduler" >
    SELECT * FROM JOB_SCHEDULER J
    <where>
      <if test="name != null">
        AND J.JOB_NAME = #{name}
      </if>
    </where>
  </select>

  <update id="updateByName" parameterType="JobScheduler">
    UPDATE JOB_SCHEDULER J
    <set>
      <if test="description != null">
        J.DESCRIPTION = #{description},
      </if>
      <if test="cronExpression != null">
        J.CRON_EXPRESSION = #{cronExpression},
      </if>
      <if test="status != null">
        J.STATUS = #{status},
      </if>
    </set>
    WHERE J.JOB_NAME = #{jobName}
  </update>

</mapper>